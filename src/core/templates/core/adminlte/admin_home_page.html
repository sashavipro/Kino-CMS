{% extends 'core/adminlte/admin_layout.html' %}
{% load static %}

{% block content %}

<div class="container mt-4">
    <h2 class="mb-4">Редактирование главной страницы</h2>

    <form method="post" class="row g-3 needs-validation" novalidate>
        {% csrf_token %}

        <div class="row d-flex">
        <!-- Status -->
        <div class="col-md-6 mb-3">
          <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="switch" name="status" {% if page.status %}checked{% endif %}>
            <label class="form-check-label" for="switch">ВКЛ</label>
          </div>
        </div>

        <!-- Языковые кнопки -->
        <div class="col-md-6 mb-3">
          <div class="btn-group" role="group">
            <!-- Кнопка для русского языка -->
            <button type="button" onclick="setLanguage('ru')"
                    class="btn btn-outline-secondary {% if request.LANGUAGE_CODE == 'ru' %}active{% endif %}">
                    Русский
            </button>
            <!-- Кнопка для английского языка -->
            <button type="button" onclick="setLanguage('en')"
                    class="btn btn-outline-secondary {% if request.LANGUAGE_CODE == 'en' %}active{% endif %}">
                    English
            </button>
          </div>
        </div>
      </div>

        <!-- Телефоны -->
        <div class="col-md-6">
            <label for="phone1" class="form-label">Телефон 1</label>
            <input type="text" class="form-control" id="phone1" name="phone1"
                   value="{{ main_page.phone1 }}" placeholder="777 85 98" required>
            <div class="invalid-feedback">Введите телефон 1.</div>

            <label for="phone2" class="form-label mt-3">Телефон 2</label>
            <input type="text" class="form-control" id="phone2" name="phone2"
                   value="{{ main_page.phone2 }}" placeholder="777 85 98" required>
            <div class="invalid-feedback">Введите телефон 2.</div>
        </div>

        <!-- SEO текст -->
        <div class="col-12">
            <label for="seoText" class="form-label">SEO текст:</label>
            <textarea class="form-control" id="seoText" name="seoText" rows="5"
                      placeholder="текст">{{ main_page.seo_text }}</textarea>
        </div>

        <!-- SEO блок -->
        <div class="col-12 mt-3">
            <h5>SEO блок</h5>
        </div>

        <div class="col-md-6">
            <label for="url" class="form-label">URL (slug)</label>
            <input type="text" class="form-control" id="url" name="url"
                 value="{% if seo_block %}{{ seo_block.slug }}{% endif %}" placeholder="URL" required>
            <div class="invalid-feedback">Введите URL.</div>
        </div>

        <div class="col-md-6">
            <label for="title" class="form-label">Title</label>
            <input type="text" class="form-control" id="title" name="title"
            value="{% if seo_block %}{{ seo_block.title_seo }}{% endif %}" placeholder="Title" required>
            <div class="invalid-feedback">Введите Title.</div>
        </div>

        <div class="col-md-6">
            <label for="keywords" class="form-label">Keywords</label>
            <input type="text" class="form-control" id="keywords" name="keywords"
             value="{% if seo_block %}{{ seo_block.keywords_seo }}{% endif %}" placeholder="Keywords" required>
            <div class="invalid-feedback">Введите Keywords.</div>
        </div>

        <div class="col-md-6">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" id="description" name="description" rows="3"
                placeholder="Description">{% if seo_block %}{{ seo_block.description_seo }}{% endif %}</textarea>
        </div>

        <!-- Кнопка Сохранить -->
        <div class="col-12 text-center mt-4">
            <button class="btn btn-primary" type="submit">Сохранить</button>
        </div>
    </form>
</div>

  <!-- Bootstrap 5 JS via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwJAirs/1Q8gS+9iI2G+6l2T1e4s6V6U" crossorigin="anonymous"></script>

<form id="languageForm" method="post" action="/i18n/setlang/" style="display: none;">
    {% csrf_token %}
    <input name="next" type="hidden" value="{{ request.get_full_path }}">
    <input id="languageInput" name="language" type="hidden" value="">
</form>

<script>
function setLanguage(langCode) {
    document.getElementById('languageInput').value = langCode;
    document.getElementById('languageForm').submit();
}
</script>
{% endblock %}

