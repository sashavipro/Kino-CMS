{% extends 'core/user/layout.html' %}
{% load i18n %}


{% block title %}{% if seo_block %}{{ seo_block.title_seo }}{% else %}{{ news.name }}{% endif %}{% endblock %}
{% block keywords %}{% if seo_block %}{{ seo_block.keywords_seo }}{% endif %}{% endblock %}
{% block description %}{% if seo_block %}{{ seo_block.description_seo }}{% endif %}{% endblock %}


{% block content %}
<div class="container w-80">
  <div class="row">
    <div class="col-lg-9 w-80">
      <div class="text-center my-4">
        <h2>{% translate 'Акции и Скидки'%}</h2>
      </div>
      <div class="content-block">
        <div class="row g-4">
          {% for news in news_list %}
          <div class="col-md-4">
            <div class="poster-card">
              {% if news.main_image %}
                <img src="{{ news.main_image.url }}" alt="">
              {% endif %}
              <h5 class="mt-2"><a href="{{ news.url_movie }}">{{ news.name }}</a></h5>
              <div class="tags">
                <div class="tag">{{ news.time_created|date:"d.m.Y" }}</div>
              </div>
              <p>{{ news.description|truncatechars:120 }}</p>
            </div>
          </div>
          {% empty %}
          <p>{% translate 'Пока новостей нет.' %}</p>
          {% endfor %}
        </div>
      <!-- ДОБАВЛЯЕМ БЛОК ПАГИНАЦИИ -->
        <nav aria-label="Page navigation" class="mt-4">
          {% if news_list.has_other_pages %}
            <ul class="pagination justify-content-center">
              {% if news_list.has_previous %}<li class="page-item"><a class="page-link" href="?page={{ news_list.previous_page_number }}">{% translate 'Назад'%}</a></li>{% endif %}
              {% for num in news_list.paginator.page_range %}
                {% if news_list.number == num %}<li class="page-item active"><a class="page-link" href="#">{{ num }}</a></li>
                {% else %}<li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>{% endif %}
              {% endfor %}
              {% if news_list.has_next %}<li class="page-item"><a class="page-link" href="?page={{ news_list.next_page_number }}">{% translate 'Вперед'%}</a></li>{% endif %}
            </ul>
          {% endif %}
        </nav>
      </div>
    </div>
  <!-- Правая колонка с рекламой -->
    <div class="col-lg-3 w-20">
      <div class="ad-block">
        <img src="https://picsum.photos/1200/500?random=1" alt="">
      </div>
    </div>
  </div>
</div>
{% endblock %}
