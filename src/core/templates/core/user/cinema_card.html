{% extends 'core/user/layout.html' %}

{% block title %}{% if seo_block %}{{ seo_block.title_seo }}{% else %}{{ cinema.name }}{% endif %}{% endblock %}
{% block keywords %}{% if seo_block %}{{ seo_block.keywords_seo }}{% endif %}{% endblock %}
{% block description %}{% if seo_block %}{{ seo_block.description_seo }}{% endif %}{% endblock %}
{% block og_url %}{% if seo_block %}{{ request.build_absolute_uri }}{% endif %}{% endblock %}

{% block cssstyle %}
<style>
    .col-auto img{
        max-height: 60px;
        max-width: 60px;
    }
</style>
{% endblock %}

{% block content %}
<!-- Баннер -->
<div class="text-center">
    {% if cinema.main_image %}
        <img src="{{ cinema.main_image.url }}" alt="Баннер {{ cinema.name }}" class="main-banner" style="width:1000px; height:500px; object-fit:cover;">
    {% else %}
        <img src="https://picsum.photos/1200/400?random=1" alt="Баннер по умолчанию" class="main-banner" style="width:1000px; height:500px; object-fit:cover;">
    {% endif %}
</div>
<div class="container">
    <div class="row">
        <!-- Левая колонка -->
        <aside class="col-3 p-3">
            <div class="mb-4">
                <div class="ad-block">
                    <img src="https://picsum.photos/1200/500?random=1" alt="Реклама">
                </div>
            </div>
            <div>
                <h4 class="text-black">Количество залов: {{ halls|length }}</h4>
                <ul class="list-unstyled">
                    <!-- Динамический список залов -->
                    {% for hall in halls %}
                        <li><a href="{% url 'core:card_hall' hall.pk %}">{{ hall.number_hall }}</a></li>
                    {% empty %}
                        <li>Нет информации о залах.</li>
                    {% endfor %}
                </ul>
            </div>
            <div>
                <h4 class="text-black">Смотрите сегодня</h4>
                <ul class="list-unstyled">
                    <li><a href="#">Сеанс 1</a></li>
                    <li><a href="#">Сеанс 2</a></li>
                    <li><a href="#">Сеанс 3</a></li>
                </ul>
            </div>
            <div class="mb-2">
                <a href="{% url 'core:schedule' %}"><button class="btn btn-secondary">Расписание сеансов</button></a>
            </div>
        </aside>

        <!-- Правая колонка (каталог фильмов) -->
        <main class="col-9 p-4">
                <div class="row">
                    <!-- блок 1 -->
                    <div class="d-flex col-md-6 align-items-center mb-3 flex-row">
                        <div class="col-auto">
                            <h1 class="text-black">{{ cinema.name }}</h1>
                        </div>
                        <div class="col-auto">
                            {% if cinema.logo %}
                                <img src="{{ cinema.logo.url }}" alt="Логотип {{ cinema.name }}" class="img-fluid">
                            {% endif %}
                        </div>
                    </div>
                    <!-- блок 2 -->
                    <div class="d-flex flex-column col-md-6 ">
                        <div class="mb-2">
                            <a href="{% url 'core:schedule' %}"><button class="btn btn-secondary">Расписание сеансов</button></a>
                        </div>
                        <div class="d-flex flex-column gap-1">
                            <div>
                                <button type="button" class="btn btn-primary" style="max-width:40px">3D</button>
                                <button type="button" class="btn btn-primary" style="max-width:80px">D-BOX</button>
                                <button type="button" class="btn btn-primary" style="max-width:150px">DOLBY ATMOS</button>
                                <button type="button" class="btn btn-primary" style="max-width:80px">VIP</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col text-black">
                    <!-- Динамическое описание -->
                   <p>{{ cinema.description|linebreaks }}</p>
                </div>

                <h1 class="text-center text-black mb-4">Условия</h1>
                <div class="col text-black">
                    <!-- Динамические условия -->
                    <p>{{ cinema.conditions|linebreaks }}</p>
                </div>

                {% if cinema.gallery and cinema.gallery.image_set.all %}
                    <h4 class="text-black">Фотогалерея</h4>
                    <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            {% for slide in cinema.gallery.image_set.all %}
                                <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="{{ forloop.counter0 }}" class="{% if forloop.first %}active{% endif %}" aria-current="true"></button>
                            {% endfor %}
                        </div>
                        <div class="carousel-inner">
                            {% for slide in cinema.gallery.image_set.all %}
                                <div class="carousel-item {% if forloop.first %}active{% endif %}" >
                                    <img src="{{ slide.image.url }}" class="d-block w-100" alt="Фото галереи" style="width:1000px; height:500px; object-fit:cover;">
                                </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        </button>
                    </div>
                {% endif %}

        </main>
    </div>
</div>

<!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

